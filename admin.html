<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Admin - PPMTB</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com">
    </script>
    <!-- Poppins Font -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        body {
            font-family: 'Poppins', sans-serif;
        }
    </style>
    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js">
    </script>
</head>
<body class="bg-green-50">

    <!-- Navbar -->
    <nav class="bg-green-700 text-white text-center py-4 text-2xl font-semibold shadow-md">
        Admin PPMTB
    </nav>

    <!-- Container -->
    <div class="container mx-auto mt-6 p-6 bg-white shadow-lg rounded-lg">

        <h2 class="text-2xl font-bold text-green-700 mb-6 text-center">Data Pengurusan Surat</h2>

        <!-- Table -->
        <div class="overflow-x-auto">
            <table class="min-w-full bg-white border border-gray-300 shadow-md rounded-lg">
                <thead>
                    <tr class="bg-green-600 text-white">
                        <th class="p-4 border">Nama</th>
                        <th class="p-4 border">Nomor WA</th>
                        <th class="p-4 border">Keperluan</th>
                        <th class="p-4 border">Foto KTP</th>
                        <th class="p-4 border">Foto KK</th>
                        <th class="p-4 border">Surat Tambahan 1</th>
                        <th class="p-4 border">Surat Tambahan 2</th>
                    </tr>
                </thead>
                <tbody id="data-container">
                    <!-- Data dari Supabase -->
                </tbody>
            </table>
        </div>

    </div>

    <script>
        const supabaseUrl = "https://nkzpjtocjiluknfojmvq.supabase.co";  // Ganti dengan URL Supabase Anda
        const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5renBqdG9jamlsdWtuZm9qbXZxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI1OTA1MzUsImV4cCI6MjA1ODE2NjUzNX0.ZKMZ0F1PlJUgxofw3hHkCUYyDYMCuJIgS0NWO0PIhVk";  // Ganti dengan API Key Supabase Anda
        const supabase = supabase.createClient(supabaseUrl, supabaseKey);

        async function loadData() {
            const { data, error } = await supabase.from("pengurusan").select("*");
            if (error) {
                console.error("Error mengambil data:", error);
                return;
            }

            const container = document.getElementById("data-container");
            container.innerHTML = "";

            data.forEach((item) => {
                const row = document.createElement("tr");
                row.classList.add("border", "border-gray-300", "text-center", "hover:bg-gray-100", "transition");

                row.innerHTML = `
                    <td class="p-4 border">${item.nama}</td>
                    <td class="p-4 border">${item.nomor_wa}</td>
                    <td class="p-4 border">${item.keperluan}</td>
                    <td class="p-4 border">
                        <a href="https://xyzcompany.supabase.co/storage/v1/object/public/uploads/${item.foto_ktp}" 
                        class="text-white bg-green-500 px-3 py-1 rounded hover:bg-green-600 transition" target="_blank" download>Unduh</a>
                    </td>
                    <td class="p-4 border">
                        <a href="https://xyzcompany.supabase.co/storage/v1/object/public/uploads/${item.foto_kk}" 
                        class="text-white bg-green-500 px-3 py-1 rounded hover:bg-green-600 transition" target="_blank" download>Unduh</a>
                    </td>
                    <td class="p-4 border">
                        <a href="https://xyzcompany.supabase.co/storage/v1/object/public/uploads/${item.surat_tambahan1}" 
                        class="text-white bg-green-500 px-3 py-1 rounded hover:bg-green-600 transition" target="_blank" download>Unduh</a>
                    </td>
                    <td class="p-4 border">
                        <a href="https://xyzcompany.supabase.co/storage/v1/object/public/uploads/${item.surat_tambahan2}" 
                        class="text-white bg-green-500 px-3 py-1 rounded hover:bg-green-600 transition" target="_blank" download>Unduh</a>
                    </td>
                `;

                container.appendChild(row);
            });
        }

        loadData();
    </script>

</body>
</html>
